<!DOCTYPE html>
<html lang="en">
<head>
  <title>{{ name }} Attendance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #eef3ff, #f9fbff);
      min-height: 100vh;
    }
    .card {
      border-radius: 18px;
    }
  </style>
</head>

<body>

<nav class="navbar navbar-dark bg-primary px-3">
  <span class="navbar-brand fw-bold">ðŸ‘¤ {{ name }} Attendance</span>
  <a href="/attendance" class="btn btn-outline-light btn-sm">â¬… Back</a>
</nav>

<div class="container mt-4">

<div class="card shadow-lg mb-4">
  <div class="card-body">

    <div class="d-flex justify-content-between mb-3">
      <a href="/export/{{ name }}" class="btn btn-success">â¬‡ Export CSV</a>

      <a href="/attendance/delete_person/{{ name }}"
         onclick="return confirm('Delete all attendance for {{ name }}?')"
         class="btn btn-danger">
        ðŸ—‘ Delete Person Data
      </a>
    </div>

    <!-- DATE FILTER DELETE -->
    <form method="POST" action="/attendance/delete_by_date" class="row g-2 mb-3">
      <input type="hidden" name="name" value="{{ name }}">

      <div class="col-md-4">
        <input type="date" name="from_date" class="form-control" required>
      </div>

      <div class="col-md-4">
        <input type="date" name="to_date" class="form-control" required>
      </div>

      <div class="col-md-4">
        <button type="submit"
                onclick="return confirm('Delete selected date range?')"
                class="btn btn-warning w-100">
          ðŸ§¹ Delete Filtered Data
        </button>
      </div>
    </form>

    <!-- TABLE -->
    <div class="table-responsive">
      <table class="table table-bordered table-striped text-center align-middle">
        <thead class="table-primary">
          <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for r in records %}
          <tr>
            <td>{{ r.Date }}</td>
            <td>{{ r.Time }}</td>
            <td>
              <span class="badge {{ 'bg-success' if r.Status == 'IN' else 'bg-danger' }}">
                {{ r.Status }}
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

</div>
</body>
</html>
